<html><head><title>Rendering Image Frames with CSS-defined Appearance</title>
<style type="text/css">
.image_1 { float:left; margin:0px 6px 3px 0px; }
.image_1 img { margin:0px; padding:0px; border:0px; }
.image_1 .TL { width:30px; height:30px; background: url(frames/wooden/TL.gif) no-repeat; }
.image_1 .TT { height:30px; background: url(frames/wooden/TT.gif) repeat-x; }
.image_1 .TR { width:30px; height:30px; background: url(frames/wooden/TR.gif) no-repeat; }
.image_1 .LL { width:30px; background: url(frames/wooden/LL.gif) repeat-y; }
.image_1 .RR { width:30px; background: url(frames/wooden/RR.gif) repeat-y; }
.image_1 .BL { width:30px; height:30px; background: url(frames/wooden/BL.gif) no-repeat; }
.image_1 .BB { height:30px; background: url(frames/wooden/BB.gif) repeat-x; }
.image_1 .BR { width:30px; height:30px; background: url(frames/wooden/BR.gif) no-repeat; }

.image_2 { float:right; margin:0px 0px 3px 6px; }
.image_2 img { margin:0px; padding:0px; border:0px; }
.image_2 .TL { width:30px; height:14px; background: url(frames/notebook/TL.gif) no-repeat; }
.image_2 .TT { height:14px; background: url(frames/notebook/TT.gif) repeat-x; }
.image_2 .TR { width:15px; height:14px; background: url(frames/notebook/TR.gif) no-repeat; }
.image_2 .LL { width:30px; background: url(frames/notebook/LL.gif) repeat-y; }
.image_2 .RR { width:15px; background: url(frames/notebook/RR.gif) repeat-y; }
.image_2 .BL { width:30px; height:15px; background: url(frames/notebook/BL.gif) no-repeat; }
.image_2 .BB { height:15px; background: url(frames/notebook/BB.gif) repeat-x; }
.image_2 .BR { width:15px; height:15px; background: url(frames/notebook/BR.gif) no-repeat; }

.image { float:left; margin:0px 6px 3px 0px; }
.image img { margin:0px; padding:0px; border:0px; }
.image table { font-size:1px; } /* Need TT,BB content so they expand to width */
.image .TL { width:0px; height:0px; }
.image .TTL { width:0px; }
.image .TT { height:0px; }
.image .TTR { width:0px; }
.image .TR { width:7px; height:0px; }
.image .LLT { height:0px; }
.image .LL { width:0px; }
.image .LLB { height:0px; } /* IE does height 1px anyway; Moz ok */
.image .RRT { height:10px; background: url(frames/shadow/RRT.png) no-repeat; }
.image .RR { width:7px; background: url(frames/shadow/RR.png) repeat-y; }
.image .RRB { height:0px; }
.image .BL { width:0px; height:7px; }
.image .BBL { width:9px; background: url(frames/shadow/BBL.png) no-repeat; }
.image .BB { height:7px; background: url(frames/shadow/BB.png) repeat-x; }
.image .BBR { width:0px; }
.image .BR { width:7px; height:7px; background: url(frames/shadow/BR.png) no-repeat; }

</style></head><body>

<h3>Rendering Image Frames with CSS-defined Appearance</h3>

<table class="image_1" border="0" cellspacing="0" cellpadding="0"><tr>
<td class="TL"></td> <td class="TT"></td> <td class="TR"></td>
</tr><tr>
<td class="LL"></td>
<td><img src="frames/sample.jpg"></td>
<td class="RR"></td>
</tr><tr>
<td class="BL"></td> <td class="BB"></td> <td class="BR"></td>
</tr></table>

<table class="image_2" border="0" cellspacing="0" cellpadding="0"><tr>
<td class="TL"></td> <td class="TT"></td> <td class="TR"></td>
</tr><tr>
<td class="LL"></td>
<td><img src="frames/sample.jpg"></td>
<td class="RR"></td>
</tr><tr>
<td class="BL"></td> <td class="BB"></td> <td class="BR"></td>
</tr></table>

The first method wraps the image in a table with 9 cells: 4 corners, 4 sides
and one for the image.  This works well for any frame where the content on each
side is repeated for the full length (ie CSS can use repeat-x or repeat-y).. it
doesn't work as well for an offset type frame like "shadows".  We can partially
get around this by making a very long or very tall image for those sides and
adding the background with no-repeat; but this places an upper limit on the size
of image that can be put inside the frame and also makes for a larger image to
download.

<pre style="clear:both">
&lt;table class="image" border="0" cellspacing="0" cellpadding="0"&gt;&lt;tr&gt;
&lt;td class="TL"&gt;&lt;/td&gt; &lt;td class="TT"&gt;&lt;/td&gt; &lt;td class="TR"&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;
&lt;td class="LL"&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src="frames/sample.jpg" alt="image"&gt;&lt;/td&gt;
&lt;td class="RR"&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;
&lt;td class="BL"&gt;&lt;/td&gt; &lt;td class="BB"&gt;&lt;/td&gt; &lt;td class="BR"&gt;&lt;/td&gt;
&lt;/tr>&lt;/table&gt;
</pre>

<pre>
.image img { margin:0px; padding:0px; border:0px; }
.image .TL { width:30px; height:30px; background: url(frames/wooden/TL.gif) no-repeat; }
.image .TT { height:30px; background: url(frames/wooden/TT.gif) repeat-x; }
.image .TR { width:30px; height:30px; background: url(frames/wooden/TR.gif) no-repeat; }
.image .LL { width:30px; background: url(frames/wooden/LL.gif) repeat-y; }
.image .RR { width:30px; background: url(frames/wooden/RR.gif) repeat-y; }
.image .BL { width:30px; height:30px; background: url(frames/wooden/BL.gif) no-repeat; }
.image .BB { height:30px; background: url(frames/wooden/BB.gif) repeat-x; }
.image .BR { width:30px; height:30px; background: url(frames/wooden/BR.gif) no-repeat; }
</pre>

<hr width="90%"/>

<div style="position:absolute;visibility:hidden;left:0px;top:0px"><table class="image">
<tr><td id="LLT" class="LLT"></td></tr>
<tr><td id="RRT" class="RRT"></td></tr>
<tr><td id="LLB" class="LLB"></td></tr>
<tr><td id="RRB" class="RRB"></td></tr>
</table></div>

<table class="image" border="0" cellspacing="0" cellpadding="0"><tr>
<td class="TL"></td>
<td><table width="100%" cellspacing="0" cellpadding="0"><tr><td class="TTL"></td><td class="TT">&nbsp;</td><td class="TTR"></td></tr></table></td>
<td class="TR"></td>
</tr><tr>
<td height="100%"><table height="100%" cellspacing="0" cellpadding="0">
<script type="text/javascript">var x=document.getElementById('LLT');
if(x.offsetHeight>1)document.write('<tr><td class="LLT"></td></tr>');</script>
<tr><td class="LL"></td></tr>
<script type="text/javascript">var x=document.getElementById('LLB');
if(x.offsetHeight>1)document.write('<tr><td class="LLB"></td></tr>');</script>
</table></td>
<td><img src="frames/sample.jpg"></td>
<td height="100%"><table height="100%" cellspacing="0" cellpadding="0">
<script type="text/javascript">var x=document.getElementById('RRT');
if(x.offsetHeight>1)document.write('<tr><td class="RRT"></td></tr>');</script>
<tr><td class="RR"></td></tr>
<script type="text/javascript">var x=document.getElementById('RRB');
if(x.offsetHeight>1)document.write('<tr><td class="RRB"></td></tr>');</script>
</table></td>
</tr><tr>
<td class="BL"></td>
<td><table width="100%" cellspacing="0" cellpadding="0"><tr><td class="BBL"></td><td class="BB">&nbsp;</td><td class="BBR"></td></tr></table></td>
<td class="BR"></td>
</tr></table>

The second method adds nested tables to contain optional side-end cells for
rendering offset content (ie right-end of the top-side, bottom-end of the
left-side, etc).  The implementation is significantly more complex than it
should be because IE6 is unable to render a zero-height table row (min height
is one pixel).  Therefore the LLT/LLB/RRT/RRB cells that are not used must
be omitted from the html using javascript, referencing a hidden div to see
which cells are used (have height > 1).  Also note that the use of
height="100%" in the nested tables below is not html401 compliant; it is
supported by IE/Mozilla, but not Safari.

<pre style="clear:both">
&lt;div style="position:absolute;visibility:hidden;left:0px;top:0px"&gt;&lt;table class="image"&gt;
&lt;tr&gt;&lt;td id="LLT" class="LLT"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td id="RRT" class="RRT"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td id="LLB" class="LLB"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td id="RRB" class="RRB"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;/div&gt;

&lt;table class="image" border="0" cellspacing="0" cellpadding="0"&gt;&lt;tr&gt;
&lt;td class="TL"&gt;&lt;/td&gt;
&lt;td&gt;&lt;table width="100%" cellspacing="0" cellpadding="0"&gt;&lt;tr&gt;&lt;td class="TTL"&gt;&lt;/td&gt;&lt;td class="TT"&gt;&nbsp;&lt;/td&gt;&lt;td class="TTR"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;td class="TR"&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;
&lt;td height="100%"&gt;&lt;table height="100%" cellspacing="0" cellpadding="0"&gt;
&lt;script type="text/javascript"&gt;var x=document.getElementById('LLT');
if(x.offsetHeight&gt;1)document.write('&lt;tr&gt;&lt;td class="LLT"&gt;&lt;/td&gt;&lt;/tr&gt;');&lt;/script&gt;
&lt;tr&gt;&lt;td class="LL"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;script type="text/javascript"&gt;var x=document.getElementById('LLB');
if(x.offsetHeight&gt;1)document.write('&lt;tr&gt;&lt;td class="LLB"&gt;&lt;/td&gt;&lt;/tr&gt;');&lt;/script&gt;
&lt;/table&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src="frames/sample.jpg"&gt;&lt;/td&gt;
&lt;td height="100%"&gt;&lt;table height="100%" cellspacing="0" cellpadding="0"&gt;
&lt;script type="text/javascript"&gt;var x=document.getElementById('RRT');
if(x.offsetHeight&gt;1)document.write('&lt;tr&gt;&lt;td class="RRT"&gt;&lt;/td&gt;&lt;/tr&gt;');&lt;/script&gt;
&lt;tr&gt;&lt;td class="RR"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;script type="text/javascript"&gt;var x=document.getElementById('RRB');
if(x.offsetHeight&gt;1)document.write('&lt;tr&gt;&lt;td class="RRB"&gt;&lt;/td&gt;&lt;/tr&gt;');&lt;/script&gt;
&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;
&lt;td class="BL"&gt;&lt;/td&gt;
&lt;td&gt;&lt;table width="100%" cellspacing="0" cellpadding="0"&gt;&lt;tr&gt;&lt;td class="BBL"&gt;&lt;/td&gt;&lt;td class="BB"&gt;&nbsp;&lt;/td&gt;&lt;td class="BBR"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;td class="BR"&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;
</pre>

<pre>
.image img { margin:0px; padding:0px; border:0px; }
.image table { font-size:1px; } /* Need TT,BB content so they expand to width */
.image .TL { width:0px; height:0px; }
.image .TTL { width:0px; }
.image .TT { height:0px; }
.image .TTR { width:0px; }
.image .TR { width:7px; height:0px; }
.image .LLT { height:0px; }
.image .LL { width:0px; }
.image .LLB { height:0px; } /* IE does height 1px anyway; Moz ok */
.image .RRT { height:10px; background: url(frames/shadow/RRT.png) no-repeat; }
.image .RR { width:7px; background: url(frames/shadow/RR.png) repeat-y; }
.image .RRB { height:0px; }
.image .BL { width:0px; height:7px; }
.image .BBL { width:9px; background: url(frames/shadow/BBL.png) no-repeat; }
.image .BB { height:7px; background: url(frames/shadow/BB.png) repeat-x; }
.image .BBR { width:0px; }
.image .BR { width:7px; height:7px; background: url(frames/shadow/BR.png) no-repeat; }
</pre>

<hr width="90%">

Based on this analysis I recommend the first option above, using tall/wide images to
support offset frames like shadows and simple_book.  The fallback is server-side
rendering of html that can include only that table cells that are needed for the
particular frame being used.

</body></html>
