2002-02-24  Chris Smith  <chris@jacko.com> 1.2.6-cvs-b16

	* UI cleanup of slideshow, captionator. On main page, 
	  got rid of reviled <hr> tag.

	* New showChildAlbums feature now obeys display_clicks setting
	  and no longer displays hidden albums.
	
2002-02-24  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b15

	* Feature:  Added Jacob Redding's slideshow script.  You can now view
	  the entire contents of an album as a slide show with forward/reverse
	  controls, random access and delay times.

2002-02-23  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b14

	* Optimization: we now provide the option to cache EXIF data in the
	  album so that it only needs to be generated once.  This is trading
	  off album size vs. cpu cycles.  I'm not yet sure if it's a good
	  idea...

2002-02-23  John Kirkland <jpk@bl.org> 1.2.6-cvs-b13

	* Rotated images no longer lose their exif data.  I incorporated
	  a patch from Eelco Brolman (eelcob) and made some minor
	  modifications.  This fixes bug #457358 and feature #473443. 

2002-02-23  John Kirkland <jpk@bl.org> 1.2.6-cvs-b12

	* Fixed buglet where a non-logged in user could not use the 
	  "View All Comments" feature.  This is bug #521810.

2002-02-23  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b11

	* Added Chris's captionator feature.  It allows you to edit many
	  captions at once (huge time saver!)  Another patch that I should have
	  rolled in umpteen months ago.

	* Added Jesse Mullan's "show album tree" feature that allows you to see
	  the entire tree of child albums at the top level of Gallery.  Thanks,
	  Jesse!  Sorry it took me 5 months to incorporate your patch :-/

2002-02-22 Bharat Mediratta <bharat@fusionone.com> 1.2.6-cvs-b10

	* Incorporated patch from Joseph D. Scheve <chevy@tnatech.com> that
	  allows you to view all the comments for an album.  It's pimp!  Who
	  says that open source doesn't work?

	* Incorporated patch from Jesse Mullan <jmullan@visi.com> that 
	  prevents users from viewing hidden photos by hand-crafting
	  the direct image URL.

2002-02-20  John Kirkland  <jpk@bl.org> 1.2.6-cvs-b9
	
	* At image upload time, jhead now runs against the image that we
	  copy into our album directory instead of the original uploaded
	  image.  The reason for this is because we were not escaping
	  special characters in the original filename.  Characters like
	  <space>, ', and " would cause jhead to fail.  Since our copied
	  version of the file has all of these characters removed, it is
	  a safe alternative.

2002-02-19  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b8

	* Minor tweak -- we now set an extended time limit when moving photos
	  also.

2002-02-11  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b7

	* When uploading photos, we now move the newly uploaded file into
	  gallery's temp directory using the move_uploaded_file() function.
	  This allows us to sidestep the open_basedir restriction.

2002-01-18  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b5

	* Fix for bug #487744: Gallery $index conflicts with Nuke $index

	* Added a configuration option to allow you to specify the image
	  quality for JPEG images.  The default is still 95, though.  This
	  requires a bump to the config version so all new installations will
	  be forced to re-run the config wizard.

2002-01-18  Bharat Mediratta <bharat@menalto.com> 1.2.6-cvs-b4

	* Fix for bug #505234: Gallery with PHP-Nuke (5.4) include error
	  In PHP-Nuke 5.4 they changed the $op variable to $mop	
	
	* Fix for bug #505120: "File upload in progress" bogs down server
	  Change the "Upload Progress" dialog box to use a single animated GIF
	  instead of the javascript solution.  This can reduce server load
	  considerably if the browser has very conservative caching settings.

	* Fix for bug #502543: Private album name leak

2002-01-08  Bharat Mediratta  <bharat@menalto.com> 1.2.6-cvs-b3

	* Fixed a bug where moving a nested album to a new location would
	  delete all the photos inside the album.

	* Added "mpeg" to the list of movie types.

2002-01-04  John Kirkland <jpk@bl.org> 1.2.6-cvs-b2
	
	* Fixed bug #426151 -- Upload fails on file names with apostrophe

2002-01-04	Chris Smith <chris@jacko.com> 1.2.6-cvs-b1

	* Fixed bug #490317: mismatched table tags in view_photo.

	* Fixed bug #497703: some &nbsp;'s that were missing
	  their semicolons.

	* Fixed bug in view_album where when embedded in a Nuke install
	  that was 'also' symlinked, the paths to the pixel_trans.gif's
	  were broken.

2002-01-04  John Kirkland <jpk@bl.org> 1.2.5-p1

	* Fixed bug where if you deleted an album, gallery would not
	  delete the nested albums within it.  SF #466790

2001-12-07  Bharat Mediratta  <bharat@menalto.com> (1.2.5)

	* v1.2.5 ships!

2001-12-06  Bharat Mediratta  <bharat@menalto.com> (1.2.5-cvs-b2)

	* Fixed bug #484755: Directory import fails on PHP 4.0.4pl1

2001-12-04  Bharat Mediratta  <bharat@menalto.com> (1.2.5-cvs-b1)

	* README: added more info on how to do CHMOD operations from CuteFTP.

	* Incorporated a patch from Adam Lazur (adam@lazur.org) which increases
	  Gallery's ability to deal with symbolic links.  It checks to see if a
	  file is a symlink, and that the symlink is valid, before trying to
	  open/read it.  This patch enables Adam's debian package of Gallery.
	
2001-12-04  Bharat Mediratta  <bharat@menalto.com> (1.2.4-p1-cvs-b1)

	* PostNuke now has the capability for using encrypted database
	  username/password information, which works just fine with the ADODB
	  database abstraction layer but breaks our layer.  I've updated the
	  PostNuke User and UserDB classes to use the PostNuke database object
	  to fix this problem.

2001-11-29  Bharat Mediratta  <bharat@menalto.com> (1.2.4)

	* v1.2.4 ships!

2001-11-28  Bharat Mediratta  <bharat@menalto.com> (1.2.4-cvs-b1)

	* Added support for PostNuke 0.7's authentication scheme.  We now
	  detect if we're embedded in this release of PostNuke and Do the Right
	  Thing.
	
2001-11-27  Bharat Mediratta  <bharat@menalto.com> (1.2.3-p1)

	* Fix for bug #486228 -- Can't cancel comment in dialog box

	* [SECURITY] Fixed a bug where a bad guy could use a malicious search
	  string or comment value to see the cookie. Thanks to Cabezon Aurelien
	  for finding the flaw.

2001-11-20  Bharat Mediratta  <bharat@menalto.com> (1.2.3)

	* v1.2.3 ships!

2001-11-19  Bharat Mediratta  <bharat@menalto.com> (1.2.3-cvs-b9)

	* Yet another minor tweak for IE6 compatibility.  Changed the way that
	  the javascript-page-reload code works in view_album.php

2001-11-17  Bharat Mediratta  <bharat@menalto.com> (1.2.3-cvs-b8)

	* [SECURITY] Fixed a bug where a bad guy could craft a url to index.php
	  that would allow remote file reading.  Thanks to Cabezon Aurelien for
	  finding the flaw.

	* Added the PostNuke style modversion array into version.php

2001-11-15  Bharat Mediratta  <bharat@menalto.com> (1.2.3-cvs-b7)

	* Fixed bug 481237: IE6 / JavaScript error on page refresh
	  IE6 now works without javascript errors.

	* The following characters can no longer be used in an album name:
 	  . (dot) # (pound) + (plus) 
	  This fixes bugs 461799, 466789, and 469346.

	* Fixed two bugs having to do with URL and local file uploads on
	  Win32.  We were accidentally trying to convert urls to win32 file
	  format (leading to urls like "http;\\foo\bar" -- eek) and we were not
	  opening binary files with the "b" flag (thanks trantori@users.sf.net)

2001-11-12  Matthew McEachen  <mceachen@users.sourceforge.net> (1.2.3-cvs-b6)

	* Added "check all - clear all - invert selection" functionality
	  to the save_photos script. Also made the page a bit easier to
	  render for the user agent (removed the tr-per-checkbox).

2001-11-12  Chris Smith <chris@jacko.com> (1.2.3-cvs-b5)

	* Fixed a bug in Gallery Remote album fetch routine where if
	  the user did not have write permission on a top level album,
	  the album fetch refused to delve within to find nested albums
	  the user might be able to write to.

2001-11-11  Chris Smith <chris@jacko.com> (1.2.3-cvs-b4)

	* Added Gallery Remote communication script. Added link in 
	  add_photos.php to direct the user to the Gallery Remote
	  download page.

2001-11-09  Bharat Mediratta  <bharat@menalto.com> (1.2.3-cvs-b3)

	* Fixed the annoying bug where if you modify the admin account using
	  the [manage users] interface it would log you out and you'd lose the
	  admin-ness of that account.

2001-11-05  Chris Smith  <chris@jacko.com> (1.2.3-cvs-b2)

	* No longer use the array_reverse function, as some older php
	  installations complain about the two parameter version of it.

2001-11-05  Bharat Mediratta  <bharat@menalto.com> (1.2.3-cvs-b1)

	* Added config wizard option to disable usage of flock(), since it
	  doesn't work in all environments.

2001-11-01  Bharat Mediratta  <bharat@menalto.com> (1.2.2)

	* v1.2.2 ships!

	* Added a fix to index.php so that it now detects it's Nuke module
	  name.  Now, you don't need to modify this variable by hand if you
	  rename your Gallery directory.

2001-10-29  Bharat Mediratta  <bharat@menalto.com> (1.2.2-cvs-b6)

	* In NetPBM 9.19, they renamed "ppmtojpeg" to "pnmtojpeg".  Argh!  So,
	  we need to be able to use whichever binary is handy.  Search for both
	  of them and then add a special case constant to tell us which binary
	  we located on the machine (so we know which one to use!).

	  This requires a change in the config version which means that you'll
	  be forced to re-run the config wizard.

2001-10-26  Bharat Mediratta  <bharat@menalto.com> (1.2.2-cvs-b5)

	* Adjusted capture_hours dropdown to include the 0 hour (12AM). Thanks
	  to Dan Wood for the catch/patch.

	* Fixed bug #475151: Album link always goes to page 1.  We now track
	  the most recently viewed page of each album in the session and return
	  to that page.  

	* (chris) Changed the vertical alignment of the caption for clarity.

2001-10-16  Bharat Mediratta  <bharat@menalto.com> (1.2.2-cvs-b4)

	* platform/fs_win32: fixed a bug where we were using a form of of 
	  str_replace that only works on PHP 4.0.5+

	* Made the serialization code more robust by checking to see if any
	  bytes were written into the new file before replacing the existing
	  file with it, and adding advisory locks around the whole thing.

	* platform/fs_win32: fixed a bug where it wasn't fully collapsing any
	  number of \'s in a filename into a single \ properly.
	
2001-10-13  Bharat Mediratta  <bharat@menalto.com> (1.2.2-cvs-b3)

	* Fixed bug [#466729] Bad aspect ratio in html 4 rotated imgs.  In
	  fixing this bug I found another problem: we were not upgrading the
	  thumbnail and highlight images as part of the upgrade process.  So I
	  fixed the upgrade code and have bumped the album version.  This means
	  that YOUR ALBUMS WILL BE AUTOMATICALLY UPGRADED next time you view
	  them, after getting this code.

	* Fixed a bug where we still count clicks, even when they are
	  disabled in the album (we just don't show the results).  Now we don't
	  count them, either.

	* Added the binary flag to fs_fopen() so that batch uploads 
	  from a directory work on Win32 (thanks to Steve White) 

2001-10-11  Chris Smith  <chris@jacko.com> (1.2.2-cvs-b1)

	* Breadcrumb trail now behaves properly for multiply nested
	  albums.

2001-09-30  Bharat Mediratta  <bharat@menalto.com> (1.2.1-p1)

	* Fixed a bug in the serialization code to remove a race condition 
	  that can cause heavily used albums to lose their .dat files.

	* Fixed Album.load() so that it loads the backup .dat file if the main
	  one is missing (to aid galleries stricken by the serialization bug)

2001-09-14  Bharat Mediratta  <bharat@menalto.com>

	* v1.2.1 ships!

2001-09-13  Bharat Mediratta  <bharat@menalto.com> (1.2.1-cvs-b5) 

	* Fixed bug "#461263: local upload don't work anymore!".  Thanks to
	  Jens Langner for the catch.

2001-09-12  Chris Smith  <chris@jacko.com> (1.2.1-cvs-b4) 

	* Fixed a bug that caused [add comment] in view_photo.php to not	
	  work in some circumstances. 

2001-09-10  Bharat Mediratta  <bharat@menalto.com> (1.2.1-cvs-b3) 

	* Fixed a bug that caused rotate images to appear with the wrong aspect
	  ratio when using the auto-resize code, thanks to Edouard Lafargue

	* Fixed several fairly serious security vulnerabilities thanks to
	  timely info from Mary J. Alderdice and Scott Salvidio.  

	* Updated copyright notice.

2001-09-10  Bharat Mediratta  <bharat@menalto.com> (1.2.1-cvs-b2) 

	* Fixed a harmless but annoying bug in Gallery_UserDB::getUidList()
	  where we were failing to use the full pathname to refer to a file.  

2001-09-09  Bharat Mediratta  <bharat@menalto.com> (1.2.1-cvs-b2)

	* Fixed the sporadic session timeout bug!  It was caused by the click
	  counter code stuffing way too much data into the cookie.  Cookies
	  have a 1024 byte limit and the new stuff we were putting in would
	  eventually cause the session id to drop out.  D'oh!

	* Fixed issues with sucking images via the web:
	  - Fixed timeout bug when parsing large HTML files 
	  - Prepend http: when no scheme is present (both initially and on the 
	    results of parsed data) 

	* It turns out that mod_rewrite requires the FollowSymLinks option
	  enabled (thanks to Dan Brown for catching this).  The setup wizard
	  will now turn it on for you.

2001-09-08  Bharat Mediratta  <bharat@menalto.com> (1.2.1-cvs)

	* Extended the configure instruction pages to have links to the FAQ and
	  the mailing lists

	* Dial down the error reporting (in case it's turned on for the
	  server) for now.  We'll properly address this in v2.0	
	
	* Fixed a bug in the way that we were detecting HTTPS that was  
	  accidentally causing false positives on some systems. 

2001-09-07  Bharat Mediratta  <bharat@menalto.com> (1.2.1-cvs)

	* Fixed bug #459471 where you get "Cannot redeclare fs_copy()"
	  in the config wizard.  This only happens on older versions
	  of PHP like 4.0.1pl2

	* Fixed a bug in the style sheet link function (thanks to Tony Clayton)
	  that caused it to return a link in "/css" when upgrading from older
	  versions of Gallery.	
	
2001-09-07  Bharat Mediratta  <bharat@menalto.com>

	* At long last, released v1.2!

2001-08-31  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b19)

	* Set the umask before copying files and making directories (and
	  restore it when we're done) so that we avoid any potential issues if
	  the umask is in some weird state.  Thanks to Jeff Kilbride for the
	  patch. 

2001-08-29  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b18)

	* Potentially fixed a bug on PHP 4.0.1 where it complains that the
	  fs_XXX methods are redefined.  This is happening because the
	  require() method fires even when the line it's on never gets
	  executed.  Replace those with include().

2001-08-24  Bharat Mediratta  <bharat@menalto.com>

	* Upped the quality of the ppmtojpeg operation to 95.  This is the
	  highest quality setting recommended by the jpeg folks and should
	  minimize image degradation when processing jpeg images.

a2001-08-21  Chris Smith  <chris@jacko.com> (1.2-cvs-b17)

	* Fixed a minor bug that would cause the edit_caption dialog
          to display an incorrect value in the capture year field when
          using IE6beta. 

2001-08-20  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b16)

	* Fixed a minor bug that would cause index-out-of-bounds errors when
	  trying to move albums.  The error is visible in Netscape, but not in
	  IE.  The function would still work, but it would look bad.

2001-08-15  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b15)

	* Fixed a serious bug that could cause album corruption in large
	  albums.  The way that we were serializing data files had a race
	  condition; if you have two users who modify an album at the same
	  time (one of them might just be updating a click count) you will wind
	  up with a mangled data file.

2001-08-10  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b14)

	* Fixed a bug where if you turned off image resizing in the album and
	  turned on fit-to-window, you'll get a Javascript error.

2001-08-09  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b13)

	* Fixed a minor warning, "Warning: Missing argument 1 for
	  getrawdimensions()" when uploading.

2001-08-08  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b12)

	* Yet *another* set of bug fixes to the highlight album code.  This
	  round fixes another variant of the problem when you have nested empty
	  albums.

2001-08-08  Bharat Mediratta  <bharat@menalto.com> (1.2-cvs-b11)

	* Yet another bug fix to the highlight album code.  This time around
	  we're fixing an edge case which occurs when you have a nested album
	  that contains only an empty nested album.  This incidentally fixes
	  some problems with the mirroring caused by the prior fixes.

	* Sessions are no longer shared between multiple Galleries on the same
	  server, unless both Galleries use the same user database files.  Each
	  Gallery will have its own session (and you can flip back and forth
	  between them).

2001-08-07  John Kirkland  <jpk@bl.org> (1.2-cvs-b10)

	* Removed an extraneous "Highlight $label" line from
	  view_album.php.

2001-08-06  John Kirkland  <jpk@bl.org> 

	(1.2-cvs-b9)
	* Bug fix for "highlight Album" not working for nested
	  albums.  There are a couple of changes here.  
	  First, if we are highlighting a nested album, don't create
	  a new highlight image... one already exists in the
	  nested directory.  
	  Second, if we are attempting to get a HighlightTag or 
	  ThumbnailTag from an album, Gallery will now traverse the 
	  nestedAlbum tree downwards until it actually hits a highlight 
	  or thumbnail for a real picture.  
	  Third, since we are not creating new highlight images 
	  when highlighting a nestedAlbum, if you change the highlight 
	  photo of a highlighted nested album it will change the 
	  highlight in the parent as well.  (geez... try saying that 
	  3 times real fast)

	(1.2-cvs-b8)
	* Added the ability to set the album properties for nested
	  albums without having to manually traverse a given tree
	  and change each one.  This was accomplished by adding a
	  checkbox in edit_appearance.php and by adding a new
	  method in Album.php called setNestedProperties().
	  Ed and Mary, this one is for you.  :-)

2001-08-05  Chris Smith <chris@jacko.com> (1.2-cvs-b7)

	* Fixed a bug where the raw and sized dimensions of an 
	  image were not getting updated after rotate.

2001-08-05  John Kirkland  <jpk@bl.org>  (1.2-cvs-b6)
	* Changed a few more $name variables to $src_name and one to
	  $dst_name in classes/AlbumItem.php.

2001-08-05  John Kirkland  <jpk@bl.org>  (1.2-cvs-b5)
	* Don't display [reset counter] in albums.php if the display
	  counts feature is turned off for that particular album.

2001-08-05  John Kirkland  <jpk@bl.org>  (1.2-cvs-b4)
	* Nested albums now inherit the album settings from their parents
	  when they are created.  

	* Modified the "return-to" behavior when nested albums are used.
	  Now, if return is turned off, then nested albums will only show
	  a return link to their parent album, but not the main gallery.

2001-08-04  Bharat Mediratta  <bharat@menalto.com>  (1.2-cvs-b3)

	* Added a hack that allows you to do multi-level album highlighting.
	  It's still a bit limited; if you change the highlight at the
	  innermost level you still need to update it every step of the way
	  back up the chain.

2001-08-03  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a bug that was causing you to be unable to modify the 
	  photo capture date.

	* Fixed a bug where if you change your own username it drops you
	  out of your session!

	* Fix for bug #447424: rotate not working under Nuke5.

	* Fixed bug #445598: duplicate images generated when uploading via
	  URL or from the local filesystem.  It turns out that we've had a
	  bug in the URL submit code since it was first written where we
	  double submit the form!  Thanks to cybertech@users.sourceforge.net
	  for letting me debug the problem onsite.

	* Added the mirror-site feature!  It still needs to be optimized,
	  but in its current state, you can rsync your albums to a remote
	  site (that you specify in the config wizard) and Gallery will
	  use photos from that location if they are up to date.

2001-08-02  Bharat Mediratta  <bharat@menalto.com>

	* Improved the URL fetch code so that now 
	   -  you don't need to specify http:// 
	   -  if it fails the first time, it'll try again with a trailing / 
	  The combination of these two tweaks allows you to enter 
	  "www.cnn.com" in the URL box. 

	* Removed dependency on Perl Compatible Regular Expression (PCRE)
	  library.  

	* Admin management improvements:
	  o Admins can now modify other admin accounts.
	  o Admins can now grant admin privileges to regular users, 
	    making them full admins.  
	  o The admin account can rename itself.

2001-08-01  Bharat Mediratta  <bharat@menalto.com>

	* Reworked the config wizard.  It is much more friendly and
	  informative now. Hopefully this will cut down on confusion
	  during the configuration process.

2001-08-01  John Kirkland  <jpk@bl.org>

	* Optimization... fewer uses of $albumDB = new AlbumDB();
	  i.e.  Only load the required albums instead of all of them
	  in view_album.php.  Should speed up album access in large
	  galleries.

2001-07-31  John Kirkland  <jpk@bl.org>

	* Added 3 new sorting methods.  
		1.  Sort by number of clicks
		2.  Sort alphabetically by Captions.
		3.  Sort by number of comments.

2001-07-30  Bharat Mediratta  <bharat@menalto.com>

	* Added the ability for Gallery to use the Nuke database.  If you
	  run Gallery under Nuke it will automatically detect the Nuke
	  user database and use it.  One known problem currently is that
	  only admins can create new top level albums.

	* Fixed bug #433374 (Gallery doesn't work well under http/https)
	  by adding code to detect https and rewrite the
	  $gallery->app->photoAlbumURL accordingly.	

	* Fixed a variety of small Nuke problems (edit thumbnails feature 
	  broken, upload progress window had broken images)

	* Fixed conflict between User class and PHPLib's User class

2001-07-28  Bharat Mediratta  <bharat@menalto.com>

	* Fixed bug #435495: Can't fetch ZIP file by URL.  I fixed this in 
	  such a way that Gallery can now also handle nested ZIP files. 

2001-07-27  Bharat Mediratta  <bharat@menalto.com>

	* Two changes to the image cropping java applet:
	  + Fixed a minor bug where the image URL had a port value of -1
	    this didn't seem to cause problems (!)
	  + Added the ability to maximize the selection by double clicking
	    on any part of the image.

2001-07-24  John Kirkland  <jpk@bl.org>

	* Re-fixed bug #442445 "sub-album permission".  My fix earlier
	  was not thorough enough in its checking.

2001-07-24  John Kirkland  <jpk@bl.org>

	* Fixed bug #442445 "sub-album permissions".  Just skipping
	  over nested albums if I cannot view them.


2001-07-22  Bharat Mediratta  <bharat@menalto.com>

	* Fixed bug #443479 "invalid PHP function in functions.inc"
	  fs_is_executable() was missing from platform/ files.

2001-07-21  John Kirkland  <jpk@bl.org>
	
	* Added ability to statically sort photos by name via the
	  new sort feature.  This feature was added based on discussion
	  between Ken Frank <kffrank@mn.mediaone.net> and 
	  Ed Wilts <ewilts@ewilts.org> on our new Gallery-users mailing 
	  list.

	* uploadDate and itemCaptureDate now set at file upload time.
	  One benefit to this is...  if you upload a zip file of
	  photos, and you do not have exif data in the photos, the
	  itemCaptureDate will be set to the time/date stamp of the
	  files contained within the zip file.  This is SF feature
	  #423208.

	* Display number of Photos in addition to number
	  of albums in the header of the main page.  This is SF feature
	  #438840. 

	* Display "(hidden)" above the caption if you are viewing a 
	  hidden photo in the view_album display.  This is SF feature
	  #441336. 

2001-07-19  John Kirkland  <jpk@bl.org>

	* Fixed SF bug #442881.  "Extra </table> tag in search.php."
	
	* Fixed SF bug #439790.  "Add photos and nested albums."

2001-07-19  Bharat Mediratta  <bharat@menalto.com>

	* Added Album upgrade code.  If you upgrade Gallery to a newer
	  version and the album class has changed, you'll be required to
	  upgrade your albums to the latest version.  There is a spiffy
	  dialog that will walk you through a mostly automated process. 

2001-07-19  John Kirkland  <jpk@bl.org>
	
	* Replaced album shuffle with album sorting.  This feature
	  will allow album owners to sort their albums according to
	  the file upload date or the Picture-Taken date.  The 
	  picture-taken date is editable from the edit_caption screen.
	  Significant ideas and sorting code for this feature provided
	  by Sean Kelly <kelly@ad1440.net>.

2001-07-18  Bharat Mediratta  <bharat@menalto.com>

	* Alpha quality Win32 support is in.  I've tested the core
	  functionality but not things like zip and jhead support.  Edit
	  thumbnails appears not to be working.

	* Fixed the "1 byte sample bug".  This turned out to be quite
	  complicated and in order to maintain efficiency I had to update
	  the album integrity check code.  The upshot of this is that the
	  config wizard's public comment and click count variables HAVE
	  BEEN RESET.  If you have a copy of Gallery v1.2-cvs from prior
	  to this date you should audit these values in the config wizard
	  before viewing albums.

2001-07-13  John Kirkland  <jpk@bl.org>
	* Fixed SF bug#441249.  If a user was using the new "keep 
	  original filenames" feature and they uploaded a file with
	  a purely numeric filename, this would cause issues if they
	  were also using mod_rewrite!  So... now... if a user 
	  uploads a numeric filename and they wish to keep original
	  filenames, I add a "_G" (for Gallery) to the end of the filename.

2001-07-12  John Kirkland  <jpk@bl.org>
	* 2 minor keyword changes per Chris' request (SF#440303):
	  a.  Put keywords in photo-properties popup
	  b.  Only show keywords in search if there was a keyword match.

	* Only display "* comments available" text at the bottom
	  of an album if there was actually a comment for a photo
	  on that page.

	* Only display "Viewed n time(s)" if a photo has actually been
	  viewed before.

	* Fixed bug in [reset counter] functionality in do_command.php
	  where it wouldn't work for a non-admin user because $gallery->admin
	  wasnt' defined yet.

	* Added default settings for photo commenting and click counting
	  in the setup wizard.

	* Search will search comments if they exist for a given photo.
	  A given comment will only be displayed in the search engine
	  if it matches.


2001-07-11  John Kirkland  <jpk@bl.org>
	* Fixed a bug whereby resetting click counts was timing out for
	  large albums.  Reported by Ed.

	* Added public picture commenting feature. SF #404094
	  Specifics:
	  a.  Album owners can toggle it on/off per album
	  b.  Anyone can post a new comment if it is toggled on.
	  c.  People that can write to an album can delete individual comments.
	  d.  Comments consist of Name, Date, IPNumber, and Text.
	  e.  An '*' appears next to the captions of any photo with
	      comments.

	* Fixed minor bug in layout/searchdraw.inc


2001-07-10  John Kirkland  <jpk@bl.org>

	* Added a "keywords" feature.  When you edit captions, you now
	  have the ability to enter photo keywords that the search engine
	  will use when searching for images.


2001-07-10  Bharat Mediratta  <bharat@menalto.com>

	* Turned off magic_quotes_runtime in the config wizard so that you
	  can configure Gallery on servers that have it turned on.

2001-07-09  John Kirkland <jpk@bl.org>

	* Photo caption setting now works for URLs.  This is
	  feature #425987 from sf.

2001-07-08  John Kirkland <jpk@bl.org>

	* Photo captions now automagically get set from the original
	  filenames.  This is controlled via a checkbox in the file
	  upload screen.  Hi, Ed!  This feature is for you!  :-)  

	* Added the ability to retain original file names when uploading.  
	  All non-alpha-numeric characters are converted to underscores.
	  This feature is a gallery-admin level config.  If dup names are found
	  during upload, gallery will find a unique name based on the
	  original.  This is feature #429716 from sf.

2001-07-07  John Kirkland <jpk@bl.org>

	* Added a click counter to photos and albums.  This feature
	  uses session cookies to determine if you have viewed a particular
	  album or photo during a given browser session.  If you have not,
	  gallery will increment a click counter and display the results
	  in the view_album.php and albums.php screens.  Admin functions
	  exist at an album level to enable the viewing of click counts 
	  and to reset click counts back to zero.  This is feature #424728
	  from sf.

2001-07-06  John Kirkland <jpk@bl.org>

	* Bumped Gallery rev to 1.2-cvs

2001-07-05  Bharat Mediratta  <bharat@menalto.com>

	* Bumped Gallery rev to 1.1

2001-07-04  John Kirkland <jpk@bl.org>

	* Fixed some minor bugs in the move_album.php form.

	* Implemented 3 optimizations for moving photos between galaries:
		1.  if thumbnail exists and is correct size -- use it
		    instead of creating new one.
		2.  if resized image exists and is correct size --
		    use it instead of creating new one.
		3.  if the album highlight image is amongst the
		    images that are being moved, don't create a new
		    highlight image until all of the photos are moved.
	  Pre-optimization time:  81 seconds to move 11 images
	  Post-optimization time:  5 seconds to move 11 images

2001-07-03  Bharat Mediratta  <bharat@menalto.com>

	* Fixed the config wizard inside Nuke.

	* Made the name of the Nuke Gallery module a variable so that it
	  can be easily modified.  This makes it easier to have multiple
	  Galleries in a single Nuke site.

	* Fixed a compatibility issue that caused the setup wizard to lose
	  your settings when upgrading to v1.1

	* Fixed a bug that caused Gallery to fail under PHP 4.0RC1 and
	  verified that Gallery now works with this release.

2001-07-01  Chris Smith <chris@jacko.com>

	* Search pages now embed properly in nuke, just like
	  the other pages. Also tuned the look and feel of search.

2001-06-28  Bharat Mediratta  <bharat@menalto.com>

	* Separated gallery_style.css.default into two new style sheets,
	  standalone_style and embedded_style, which we'll use as appropriate.
	  Also, moved our style sheet to the top of the Nuke <head> tag when
	  embedded so that it can be overridden by Nuke and/or the theme.

2001-06-28 John Kirkland <jpk@bl.org>

	* Added search functionality to Gallery.  If configured on, a
	  search text box will appear on the main gallery screen.
	  It searches Album Titles and Descriptions and Photo Captions.

2001-06-28  Bharat Mediratta  <bharat@menalto.com>

	* Added a major hack to get the Gallery style sheet into Nuke.  Nuke 
	  owns the header and doesn't allow anything else to dink with it. 
	  We open Nuke's header.php file and rewrite its code to slip our 
	  style sheet in at the end. 

	* Checked in fix for bug #437039.  We were using an absolute popup
	  url for photo properties, instead of a relative one.

	* Gallery is now a PHP-Nuke 5.0 module!  This required a lot of
	  tweaks all over the system, so there will probably be some small
	  breakages.  However, you can now put your gallery in the modules
	  directory of your PHP-Nuke 5.0 site and it will appear
	  automagically in the Nuke modules list.

	  NOTE:  In order to do this we had to modify some of the default
	  wrapper code, so if you've defined your own custom html_wrap
	  files, you'll need to make sure that you look at the new default
	  files and suck in the changes found there (or your Gallery won't
	  work as a Nuke plugin).

2001-06-27  Bharat Mediratta  <bharat@menalto.com>

	* Completely change the way that we handle session variables.  In
	  the past we allowed them to be globals, but unfortunately there
	  were conflicts in the global namespace with applications such as
	  PHP-nuke.  Instead I've taken all global/session variables and
	  put them inside a global stdClass called $gallery.  Let us all
	  pray that no major PHP project uses that variable (if they do,
	  we can rename it but it will be painful).  The upshot: Gallery
	  is now one giant step closer to working with PHP-nuke

	* Created the UPGRADING doc.  It needs more content.

	* Separated the .htaccess and mod_rewrite code in the config
	  wizard.  If you don't have the appropriate overrides set in
	  Apache, you may get a 403 when you first try to run the wizard.
	  You can fix this by removing the php_value lines from the
	  setup/.htaccess file.  In the past, the wizard would *still* put
	  php_value lines in the top level .htaccess file causing gallery
	  to continue to malfunction.  Now it won't do that.

	* Integrated Jared (hogalot)'s patch that allows you to upload
	  files from a local directory.  I had to hack it up so that it
	  presents you with a list of the images that it has found, so
	  that you can pick and choose the ones that you want.  It's very,
	  very fast! 

2001-06-25  Chris Smith <chris@jacko.com>

	* Added the option to see jpeg image EXIF data. This excellent
	  patch was done by John Kirkland. This required jhead binary
	  but is an optional feature.

	* Moved order from Shutterfly link to the top of the view_photo
	  page.

	* Nested albums can be the highlights of their parent albums. 
	  Patch be John Kirkland.

2001-06-25  Bharat Mediratta  <bharat@menalto.com>

	* applied patch to progress_uploading.php from Mark van der Sanden
	  (markvds) who correctly states, "The right way to use an
	  animate-function is to first load the images into variables (of
	  type Image) and then assign the .src of that image to the .src
	  of the image on the page."

	* Fixed a bug where the "last" button was taking you to the next photo. 

	* "mov" is now a valid movie tag. 

2001-06-16  Bharat Mediratta  <bharat@menalto.com>

	* We now force magic_quotes_runtime to be off.  That setting interferes 
	  with our ability to deserialize classes from the filesystem. 

2001-06-16  Chris Smith <chris@jacko.com>

	* Bug #424361: Applet parameters caused applet to not load on
	  IE for Mac. I am unable to test this (no mac), but this change
	  doesn't break the applet on other platforms 

	* Bug #429531: Fixed broken <select> code. Broke Move photo
	  code. Also cleaned up move messaging.
	
2001-06-04  Chris Smith <chris@jacko.com>

	* Bumped the version to 1.1-cvs.

	* Added nested album functionality. Thanks to John Kirkland
	  for submitting this excellent patch.

	* Added ability to move photos (and nested albums) from one album
	  to another. In addition, contiguous blocks of photos can also
	  be moved from one album to another. Thanks again to John
	  Kirkland for this patch. Thanks also to Marc Slemko for submitting
	  a bug (#429531) with a patch (already!) related to this feature.

	* Bugfix (#424361): The edit_thumb applet should now launch in 
	  IE on the Macintosh. Thanks to "Anonomous" for submitting the
	  bug with the patch.

2001-05-23  Bharat Mediratta  <bharat@menalto.com>

	* Bumped the version to 1.03-cvs

	* Fixed a minor bug in the wizard.  In the past, if you had a
	  required binary (such as a NetPBM binary) in your path and you
	  also specified a directory location in the wizard, it used to
	  take the location from the path instead of the one you
	  specified.  This made it difficult for you to install a new
	  version of NetPBM and tell Gallery where it was located.  Now it
	  uses the path you specify.

	* Bugfix: if you're viewing an album that has N hidden photos as an
	  unprivileged user (ie, you can't see the hidden photos) then the
	  last N photos will not display correctly if you page through
	  them one at a time in full/resized mode (ie, using
	  view_photo.php).  

2001-05-20  Bharat Mediratta  <bharat@menalto.com>

	* Fixed bug where clicking the last-photo button takes you to
	  the next photo (not the last one).  Thanks to Ken Frank
	  for submitting the bug with the patch.

2001-05-12  Bharat Mediratta  <bharat@menalto.com>

	* 1.02 released

	* Fixed security hole that allows non-authenticated users to modify 
	  album permissions

	* Rebuild thumbs command was not rebuilding thumbs for hidden photos. 

	* ImageCrop loads the image properly if the webserver is not running 
	  on the default port (jacko)

2001-05-11  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a common problem where you cannot put Gallery back into secure
	  mode.  PHP's is_readable() gives false positives on some systems causing 
	  Gallery to fail to detect that the setup directory is unreadable (and 
	  that therefore we are no longer in configuration mode).  We now double 
	  check by using the fileperms() function and checking for permissions of 
	  755 on the setup dir.

	* Image rotation now uses pnmflip instead of pnmrotate.  Pnmrotate
	  is very slow and memory intensive for large images.  Pnmflip is fast
	  and is very effective for 90 degree rotations.  This means that Gallery
	  now requires the pnmflip binary, which is part of the NetPBM1.1-Gallery
	  micro distributions on the Gallery download page.

	* Modified to accept "jpeg" as a valid JPEG image file tag. 

	* Patch from John Kirkland (jpk@bl.org):
	  AlbumItem.php was explicitly checking tags for "avi" and "mpg", but
	  not "wmv".  I changed AlbumItem.php to use isMovie() instead of doing
	  the tag checking itself.

	* Improved the NetPBM-missing error message to indicate that if NetPBM
	  is installed but not in the webserver user path you can add it by hand
	  on page 2 of the wizard.

2001-05-01  Bharat Mediratta  <bharat@menalto.com>
	
	* Fixed a bug where we were generating the highlight photo from the 
	  thumbnail image.  This would result in a reduced quality highlight,
	  especially in the case where the highlight is larger than the
	  source thumbnail!
	
2001-04-30  Bharat Mediratta  <bharat@menalto.com>

	* Added --quiet flag to pnmscale to avoid dumping lots of output
	  to the log file.

	* Fixed bug #417706 (uploading images bombs in Album.php:377)

2001-04-15  Bharat Mediratta  <bharat@menalto.com>

	* Bumped version to 1.01

	* Fixed a bug where a Gallery would show up as "Empty!" in the 
	  albums page if all its photos are hidden.  I've adjusted this so 
	  that you still see the highlight photo (even if its hidden). 

	* Check if the item is a movie by id as opposed to index.  The
	  index is unreliable because it will vary if there are hidden
	  items in the album.

	* Handle movies correctly in view_photo.  From the view_album
	  page, we don't typically let you get to the view_photo page on a
	  movie, but if you're navigating forward/ackwards in the album on
	  the view_photo page already, we should show the movie.

	* Partial fix for bug 412842; we were not correctly copying the
	  movie jpg into the album when adding movies.

	* Partially closed a security hole by creating a .htaccess file in
	  the .user directory that prevents people from downloading user
	  db records.

	* Fixed bug 416033: Hidden photos can be viewed

	* We had an unacknowledged dependency on "pnmcut".  It's now 
	  made mandatory in the config wizard.

2001-04-06  Bharat Mediratta  <bharat@menalto.com>

	* Released 1.0!

	* If you compile PHP with the --enable-sigchild option, every call to
	  exec() will return a status of -1.  We now run some tests in the
	  config wizard to detect this condition and keep track of the
	  expected error status code.  If we guess wrong, you can always
	  modify it yourself.

	* Added a verify function to check to see if you provided the
	  right path to your NetPBM binaries on the confirm page.

2001-04-02  Bharat Mediratta  <bharat@menalto.com>

	* Released 1.0b10
	
	* Removed the initial redirect that happens when you don't specify a page. 
	  This was breaking Konqueror, and it was also messing up our neat short 
	  urls. 
	
	* If rewrite is on, use the short URL for navigation also, instead of  
	  view_album.php.  This preserves the album name in the URL while browsing. 
	
	* Fixed a bug in the table width; we were hardcoding it to 400 pixels instead 
	  of calculating it from the width of the thumbnails * num of columns.

2001-03-27  Bharat Mediratta  <bharat@menalto.com>

	* Added code to track the version of Gallery used to create a
	  specific session.  If that version doesn't match the current
	  version of the code then destroy the session.  In general this
	  prevents problems when you upgrade Gallery.  Specifically this
	  fixes the problem that after you upgrade from 1.0b7 and earlier
	  you can't change pages in the album.

2001-03-25  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a bug in the setup code that caused you not to see the
	  details when the magic-quotes check fails.

	* Cleaned up the instructions you receive when gallery is un- or
	  mis-configured.

	* Fixed a bug where we were relying on the SCRIPT_FILENAME and
	  SCRIPT_NAME ennvironment variables to determine our filesystem
	  path.  On servers which use PHP in a cgi-bin context, these
	  point to the PHP binary, instead of to the PHP files we're
	  evaluating.  Instead we use the HTTP_SERVER_VARS (PATH_TRANSLATED,
	  and PHP_SELF).

2001-03-24  Bharat Mediratta  <bharat@menalto.com>

	* Released version 1.0b9

	* Disallow PHP 4.0.2 in the setup wizard because it has a bug in
	  its unserialization engine.  I also added explanations for the
	  disallowed versions.

	* Fixed the show/hide bug where you'd see unpredictable results
	  when showing/hiding photos.

	* Fixed a bug where we were printing out jpegtopnm debug info only
	  when debug was *off*.

	* Fixed zipfile-sorting bug.  I was using SORT_NUMERIC inappropriately.

	* Added code to check to see if the version of PHP being used has
	  the deserialization bug (early versions of PHP4 have it), and
	  then present an appropriate error message.

2001-03-17  Bharat Mediratta  <bharat@menalto.com>

	* Released version 1.0b8

2001-03-15  Alan Harder <alan.harder@sun.com>

	* Revamped fit-to-window code; now fully functional.
	  (works for IE and Navigator and keeps the border around the image)

2001-03-13  Chris Smith <chris@jacko.com>

	* Added "Order This Photo on Shutterfly" capability.
	  this is an optional album setting.

2001-03-12  Chris Smith <chris@jacko.com>

	* Added 'Edit Thumbnail' image editing command to the view_album
	  page. This allows you to choose a sub-region of the image as
	  your thumbnail. The magic happens in a java applet.

	* Moved all image editing commands on the view_album page to
	  dropdowns (form selects) to clean up the UI.

2001-03-10  Bharat Mediratta  <bharat@menalto.com>

	* Fixed minor bug in save_photos where it was complaining about 
	  "Invalid argument supplied for foreach".

	* Added debug constant to the config wizard so that you can turn
	  debugging on and off for the application.  This will give you
	  some extra debug output to help diagnose Gallery problems.

2001-03-09  Bharat Mediratta  <bharat@menalto.com>

	* Added a new Gallery setting:  albumsPerPage.  This lets you specify
	  how many albums show up on each Gallery page.

2001-03-08  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a bug where rotating a photo wouldn't update the highlight (if 
	  the photo was also the highlight).  It does now.

2001-03-08  Dana Powers <dana@slothlovechunk.org>

	* Added HTML slurp feature to Add Photos. This lets users specify
	  a url for the gallery to parse for html links to images. Finds
	  both 'img src=..' and 'a href=...', and provides a checkbox list
	  for determining which images to actually grab and add to the album.

	* Modified javascript for browser compatibility. Konqueror works now.

2001-03-07  Alan Harder <alan.harder@sun.com>

	* Added full-only feature.  This allows the user to specify (per
	  session) that they would like to view the full size version of
	  photos directly, instead of having to click through from the 
	  resized version.

2001-03-04  Bharat Mediratta  <bharat@menalto.com>

	* When adding items to an album that has an auto_resize specified:
		* don't resize movies
		* don't expand images (only shrink them)

	* Added docs to the README about uploading large images.  If your
	  .htaccess support is working you won't need this.

	* Sort the contents of ZIP files before adding them to the
	  gallery.  This helps when you're sending a lot of images from a
	  digital camera (which automatically creates them in
	  alphabetical/numerical order).  Thanks to Axel Suppantschitsch
	  [as@suit.at] for the necessary kick in the ass to do this.

	* Turned on the --quiet flag for jpegtopnm so you'll see less crap
	  in the error log.

	* Added support for WMV movie types.

	* Added a link to the Gallery survey at the end of the config wizard.

2001-02-27  Bharat Mediratta  <bharat@menalto.com>

	* Rolled in a patch from Phil Hord to escape file names when
	  unzipping files.  This prevents the shell from interpreting them
	  and getting confused when we exec().

2001-02-26  Bharat Mediratta  <bharat@menalto.com>

	* Keith Kemp graciously allowed me to use his system to test the
	  gallery-in-document-root bug.  I found and fixed the bug that
	  leads to double //'s found in URLs when you put your gallery in
	  your document root.

	* The config wizard now checks to make sure that you've provided
	  the valid path to the actual zipinfo and unzip binaries (instead
	  of just the directory that they live in).

2001-02-24  Alan Harder <alan.harder@sun.com>, Bharat <bharat@menalto.com>, 

	* Added fit-to-window feature.  This feature will automatically
	  resize images to match the size of the user's browser.  It only
	  functions when:
		- You enable it in album properties
		- The image you're viewing has no resized image.
	  The config wizard enables this by default.

2001-02-22  Bharat Mediratta  <bharat@menalto.com>

	* Moved all exec() calls into exec_internal() in util.php.  This
	  bottleneck will make it easier to debug issues stemming from
	  exec'ing code.  Just turn on the $debug variable in
	  exec_internal() to see what it's doing.

	* Incorporated patches from Alan Harder:
	  * Don't display "on n pages" if there's only 1 page.
	  * fixed a bug where we weren't properly obeying the "showOwners"
	    flag
	  * Albums can now control their rows/cols individually, although
	    they draw their default value from the Gallery.

2001-02-22  Chris Smith <chris@jacko.com>

	* Added inline photo header and footer to the view_photo page. This
	  page uses the html_wrap files that used to be used by view_album:
	  inline_photo.header/footer. The view_album file now uses:
          inline_albumthumb.header/footer.

2001-02-15  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a bug in preprocessImage() which was causing the function
	  to fail to do anything.  Doh!

	* Several minor tweaks of visible text for clarity

	* Fixed a bug where if you put the gallery in your document root
	  (as opposed to a subdir) the config wizard would get confused
	  and would sometimes put two slashes in a row in some urls
	  (broken) or leave the slash out (equally broken).

	* Don't show the [shuffle], [resize all], or [remake thumbnails]
	  commands if there are no photos in the album.

2001-02-14  Bharat Mediratta  <bharat@menalto.com>

	* Added inline_photo headers and footers so that you can customize
	  an action for each photo.  This is good for shopping cart
	  integration. 

2001-02-13  Bharat Mediratta  <bharat@menalto.com>

	* Gallery 1.0b7 release.  Bumped config version to 9 due to 
	  setup wizard changes. 

	* Radically changed the way that the check_XXX methods work in the
	  config wizard.  Now we are able to be much more granular in what
	  is configured right and wrong on the specific system.  We also
	  check more rigorously for NetPBM.

	* Fixed a bug where init.php was getting loaded twice (this should
	  only happen in the case when you embed a newer Gallery inside an
	  older one).  Thanks to John Taber <john.taber@cntcorp.com> for
	  finding this one 

	* Fixed off-by-one error in the code that tells you the photo
	  number.  Thanks to Alan Harder <alan.harder@sun.com> for this
	  find. 

	* Fixed bug that was preventing password changes.  Thanks to Alan
	  Harder <alan.harder@sun.com> for this find. 

	* Added code to allow you to (optionally) display the album owner
	  at the Gallery level.

	* Only show the rotate command if the user has album write
	  permission. 

	* Overhauled the way that we were using NetPBM.  Before we were
	  depending on the (unreliable) anytopnm script to suck images
	  into a standard format.  Then we would output them and maintain
	  them as JPGs.  Now we examine the image tag and run the right
	  binary by hand, then keep that binary format when we generate
	  thumbnails, highlights and resizes.  While adding some
	  complexity to the system, this allows us to much more carefully
	  track what we're doing with images.

	* Album delete code now cleans up the directory before
	  removing it.  I was trying to avoid this, but because resized
	  and thumbnail images are no longer forced to be JPGs we can
	  possibly have some legitimately stranded files in an album, and
	  we don't want that to prevent an album from getting deleted.	

2001-02-11  Bharat Mediratta  <bharat@menalto.com>

	* Removed the executable bit from chmod commands in configure.sh
	  and secure.sh

2001-02-10  Bharat Mediratta  <bharat@menalto.com>

	* It appears that certain flavors of PHP4 prepend "Content-Type"
	  info to upload images.  This totally confuses NetPBM because
	  this info isn't exactly part of the image file specification.	
	  This leads to errors like:
	
		ppmtojpeg: EOF / read error reading magic number
		Not a JPEG file: starts with 0x43 0x6f

	  I fixed this by preprocessing upload images and looking for
	  the Content-Type string and removing it.

2001-02-09  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a bug in the UserDB code where we were not forcibly
	  creating an Everybody user.  This was causing users to get 
	  errors like this:

		Fatal error: Call to a member function on a non-object in
	  		     albums.php on line 76 

	* Made the magic_quotes check optional.

2001-02-08  Bharat Mediratta  <bharat@menalto.com>

	* Updated the README file to have better instructions for
	  installing and configuring the gallery, including on ftp-only
	  virtual servers.  Also added directions for customizing the
	  appearance.

	* Dropped the dependency on having a working .htaccess file, since
	  it is becoming apparent that many people don't have this
	  privilege.  It wasn't absolutely necessary anyway now that the
	  mod_rewrite code is optional also.  The only problem is that you
	  can't force the server to allow really large file uploads
	  without .htaccess working...but that'll keep for now.

	* Since we don't require .htacces anymore, we now manually load
	  init.php at the beginning of each entry point PHP file.

	* General improvements of the config wizard including better help
	  text, better layout (well, more readable but perhaps less
	  attractive in some cases), additional checks (we check
	  magic_quotes).  Removed the unused "mv" and "edit" constants.

	* We're now being a lot smarter about detecting when the Gallery
	  has not been configured and showing the user a sane error
	  message (instead of allowing it to bomb on a missing  global
	  variable) 

	* Changed the config_version to 8...you'll need to re-run the
	  wizard. 

2001-01-23  Bharat Mediratta  <bharat@menalto.com>

	* Fixed a bug in makePathWrapper() where it was (ugh) ignoring 
	  the path!

2001-01-16  Bharat Mediratta  <bharat@menalto.com>

	* Cleaned up the way that save-photo detail text was being
	  displayed. 

	* Fixed a bug where nobody but the owner was able to add photos
	  to an album.

	* Added upload progress bar.  I use the word "progress" loosely
	  because it doesn't really know how much progress is being made.
	  It's just the equivalent of a blinking light for the user to
	  look at while it chugs away.  When you add photos a window pops
	  up letting you know that it's working.  The window goes away
	  when the upload is complete.

2001-01-10  Bharat Mediratta  <bharat@menalto.com>

	* mod_rewrite is now totally optional.  If your Apache server does
	  not support it, Gallery will not attempt to use the shorter URL
	  style. 

2001-01-09  Bharat Mediratta  <bharat@menalto.com>

	* User support is in!  The config wizard will now create an
	  account by the name of "admin" with the password you provide in
	  the wizard.  Using the admin account you can create as many user
	  accounts as you want.  Each album has a set of permissions that
	  you can use to restrict who can see albums, and what they can do
	  with them when they can see them.  An album has an owner who has
	  full permissions for that album.  The ability to create albums
	  is controlled on a per-user basis.

	  This is a large change, but it should be fully backwards
	  compatible with the old gallery data.  When you start a gallery
	  with this new setup, all albums will by default be visible to
	  the public, but modifiable only by the admin account.  

2001-01-06  Bharat Mediratta  <bharat@menalto.com>

	* Fixed bug in the setup code that generates the anytopnm wrapper.
	  It was not basing the wrapper on the path the user provided --
	  it was only basing it on the path that it found.  This will
	  further help non-FreeBSD users.

	* Changed from using constant() to one_constant() in setup code
	  'cause "constant" is now a reserved word in PHP 4.0.4

	* Backticks (`) are no longer valid as part of an album name/url

	* Added last modification date and the number of items in the
	  album to the album description.

2001-01-04  chris Smith <chris@jacko.com>

        * Moved 'Edit Album Title' to the Album Properties Popup.
        
        * Added app parameter galleryTitle. Because of this bumped the
          version number.

        * Created a style sheet for the gallery. It can be overriden
          by a custom style sheet. It controls fonts and colors. 
          Album parameters override these styles when appropriate.

        * Created a new directory called html_wrap. It contains 
          wrapper html for the three page types in the gallery:
            gallery main, album view and photo view.
          These wrappers can be used to customize the look of the
          three page types. If custom wrappers are not provided, 
          the default ones are used.
          All gallery html is now encapsulated within the navigation
          bars on these pages (a nice rectangle).

        * Added an 'admin' box to sit over the navigation bars. It
          contains the admin controls.

        * All popups now use the gallery style sheet and when 
          appropriate have a default focus. 

2001-01-02  Bharat Mediratta  <bharat@menalto.com>

	* Made the NetPBM check optional since now it doesn't need to be
	  in the path and you can specify it by hand during the config process.

	* Fixed a conflict between PHP magic quotes and my new anytopnm
	  wrapper by disabling magic quotes in the gallery app.

2001-01-01  Chris Smith <chris@jacko.com>

	* Made New Year's resolution to enter my changes in the changelog.

	* Added fancy frames to the photos in AlbumView and PhotoView. 
	  These frames can be configured on a per-Album basis (in the 
          'Edit Album Appearence' panel.

	* UI revamp if the navigation controls (used in the main page and
	  AlbumView pages). Fancy icons.

	* Added navigation controls to the ViewPhoto Page. More fancy icons.

	* Added 'breadcrumb' control to ViewAlbum and ViewPhoto pages. Even
	  more fancy icons.  

	* Revamped the admin photo controls. You guessed it, fancy icons.

2001-01-01  Bharat Mediratta  <bharat@menalto.com>

	* Switched from using system("mv") to using rename() for greater
	  portability (thanks Andreas Fuchs [fox@tcnet.ch])

	* Added a wrapper around anytopnm so that it will work properly on
	  webservers that don't have the NetPBM binary directory in the
	  path.  This should ease the pain on most standard Linux
	  configurations. 

2000-12-29  Bharat Mediratta  <bharat@menalto.com>

	* Fixed several small bugs involving uploading movies.  

	* We now include the error details when an error occurs adding a
	  photo or movie to an album.

	* Minor page navigator cleanup

	* Fixed the config wizard to request the movie thumbnail image as
	  a filesystem path instead of a URL (since we copy it into the
	  album instead of linking to it)

	* Added config version numbering.  During the Gallery upgrade
	  process, this will alert you if it's necessary to re-run the
	  configuration wizard.

	* the generated config.php now contains the GPL license

	* Config wizard now locates the 'mv' binary and uses it via it's
	  full path to avoid a weird bug where the webserver looks for it
	  in /

2000-12-28  Bharat Mediratta  <bharat@harmony.menalto.com>

	* Fixed bug #126982; the wizard won't save config.php if you don't
	  provide zip binaries (and everything else -- ie, it had no
	  concept of an optional constant).

2000-12-27  Bharat Mediratta  <bharat@harmony.menalto.com>

	* All references to specific images now use the image ID (eg
	  "photo-aaa", "photo-aac") instead of the image index (eg "1",
	  "3").  This means that URLs to specific images will continue to
	  be valid even if they are moved around the album.  That's
	  essential if you want to give a URL for an image to a friend.

	* Broke main album page into separate pages and used the navigator
	  to swap between them.  This will lighten the server load since
	  every time the end user goes to the main gallery page they won't
	  be downloading every highlight image.  Not to mention the fact
	  that in large galleries you can have a ton of HTML just to
	  display all the album names, etc.

2000-12-26  Bharat Mediratta  <bharat@harmony.menalto.com>

	* Rotating photos now also rotates the resized version (instead of
	  throwing it out).
	
2000-11-23  Bharat Mediratta  <bharat@harmony.menalto.com>

	* Removed an extra backslash from htaccess.template that was
	  causing the mod_rewrite rules generated in .htaccess to be
	  broken.  This caused us not to be able to view album photos.

2000-09-28  Bharat Mediratta  <bharat@harmony.menalto.com>

	* Removed final dependencies on GD and JPEG, so likewise removed
	  those checks from the config wizard

	* Setup code: Made the code that detects the webserver uid more
	  robust so that it'll work in the absence of posix (it falls back
	  on 'whoami')

	* Setup code: Removed extra commas at the end of array
	  initializers as they caused parse problems on earlier versions
	  of PHP 4  

2000-09-19  Bharat Mediratta  <bharat@menalto.com>

	* Added error checking code to allow us to catch photos that we
	  won't be able to work with and flag them early.  This helps us
	  prevent having extra crufty file lying around the album from
	  failed photo insertions (which in turn leads to problems when we
	  want to delete the album)
	  
	* Abstracted my ad-hoc flush code into a function and put it in
	  util.php

	* Broke classes.php up into individual class files.  I should have
	  done this ages ago...the repetition of method names across
	  classes makes it hard to find the right method if they're all in
	  the same file.

2000-09-17  Bharat Mediratta  <bharat@menalto.com>

	* Added versioning support

	* Added feedback to the user when resizing all thumbnails or all
	  photos. 

	* Lots of small changes regarding thumbnails not worth mentioning
	  here. 

	* Fixed a bug where resizing to original size was not working at all.

	* Removed gif_support feature because now NetPBM is mandatory.

	* resize now uses the netpbm library to do resize instead of
	  GD. This rUleZ. [CHRIS]

	* Made the border size a choice so that off could be an
	  option. Also made the resize a choice, for the same reason [CHRIS]

	* When loading the old values, it was looking at
	  app->defaults[xxx] instead of app->default[xxx], so the defaults
	  was always getting reset to the original settings.  [CHRIS]

	* Fixed several bugs stemmming from the fact that we were not
	  always correctly treating all thumbnails as JPGs.  This would
	  mean that we'd sometimes leave cruft files lying around which
	  would prevent deleting albums.

2000-07-05  Bharat Mediratta  <bharat@menalto.com>

	* Added new setup process using the 'setup' directory.  This
	set of pages, although not yet very robust, will walk you through
	the process of configuring Gallery for your local site.

2000-07-04  Bharat Mediratta  <bharat@menalto.com>

	* Updated README to reflect v1.0 feature list
